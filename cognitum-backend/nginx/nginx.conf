events {}

http {
   include       mime.types;
   default_type  application/octet-stream;
   sendfile        on;

   server {
       listen 80;
       server_name localhost;
       return 301 https://$host$request_uri;
   }

   server {
       listen 443 ssl http2;
       server_name localhost;

       ssl_certificate     /etc/nginx/certs/server.crt;
       ssl_certificate_key /etc/nginx/certs/server.key;

       location / {
           proxy_pass         http://server:5000;
           proxy_http_version 1.1;
           proxy_set_header   Upgrade $http_upgrade;
           proxy_set_header   Connection 'upgrade';
           proxy_set_header   Host $host;
           proxy_cache_bypass $http_upgrade;
       }
   }
}
